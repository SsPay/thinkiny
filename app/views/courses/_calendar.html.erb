<div style="color: black">
  <div id='calendar'></div>
</div>
  <script>
      document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                plugins: [ dayGridPlugin, interactionPlugin, timeGridPlugin, listPlugin, bootstrapPlugin, timelinePlugin ],
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth, dayGridDay' // dayGridMonth, dayGridWeek, dayGridDay, dayGrid, timeGridWeek, timeGridDay, timeGrid
                },
                defaultView: 'dayGridMonth', // dayGridMonth, dayGridWeek, dayGridDay, dayGrid, timeGridWeek, timeGridDay, timeGrid

                navLinks: true, // can click day/week names to navigate views
                editable: false,
                eventLimit: true, // allow "more" link when too many events
                eventClick: function(info) {
                    info.jsEvent.preventDefault(); // don't let the browser navigate

                    if (info.event.url) {
                        window.open(info.event.url);
                    }
                    if (event.url) {
                        window.open(event.url, "_blank");
                        return false;
                    }
                },
                events: [
                   <% @lessons.each do |lesson| %>
                    {
                        title: "<%= lesson.theme.to_s %>",
                        start: "<%= lesson.time.strftime("%Y-%m-%d %R") %>",
                        allDay: false,
                        extendedProps: {
                            status: "<%= lesson_expired?(lesson) ? 'Complete' : 'Soon' %>"
                        }
                        // backgroundColor: 'blue',
                        // borderColor: 'green',
                        // url: 'http://google.com/',
                    },

                   <% end %>
                    {

                    }
                ],
                eventRender: function(info) {
                    if (info.event.extendedProps.status === 'Complete') {

                        // Change background color of row
                        info.el.style.backgroundColor = 'red';

                        // Change color of dot marker
                        var dotEl = info.el.getElementsByClassName('fc-event-dot')[0];
                        if (dotEl) {
                            dotEl.style.backgroundColor = 'white';
                        }
                    }
                }
            });
          // calendar.render();
        setTimeout(() => {  calendar.render(); }, 1000);
      });
  </script>